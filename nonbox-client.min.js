!function(){"use strict";angular.module("nonbox-client",["ui.router"]);var t=angular.module("nonbox-client");t.config(["$locationProvider","$stateProvider","$urlRouterProvider",function(t,e,n){e.state("device",{url:"/",templateUrl:"app/views/device.html",controller:"DeviceCtrl"}).state("networks",{url:"/networks",templateUrl:"app/views/networks.html",controller:"WifiCtrl"}).state("quickstart",{url:"/quickstart",templateUrl:"app/views/quickstart.html"}).state("tutorials",{url:"/tutorials",templateUrl:"app/views/tutorials.html",controller:["$scope","Tutorials",function(t,e){t.showMode=!1,t.tutorials=e,t.show=function(e){t.showMode=!0,t.tutorial=e}}]}).state("support",{url:"/support",templateUrl:"app/views/support.html"}).state("bugs",{url:"/bugs",templateUrl:"app/views/bugreport.html",controller:"ReportsCtrl"}).state("suggestions",{url:"/suggestions",templateUrl:"app/views/suggestion.html",controller:"ReportsCtrl"}).state("pr",{url:"/pr",templateUrl:"app/views/pr.html"}),n.otherwise("/")}]),t.controller("DeviceCtrl",["$scope","$rootScope","Nonbox","Wifi",function(t,e,n,o){t.assigned={total:10,remaining:2,devices:[{}]},t.check=function(){n.check().then(function(t){e.nbConnected=t}).catch(function(t){e.nbConnected=t}),o.status()},t.check()}]),t.controller("ReportsCtrl",["$state","$scope","Report",function(t,e,n){e.message={},e.submit=function(o){n.submit(o,t.current.name).then(function(t){200==t.status?e.message={text:"Thanks! We'll take a look.",icon:"check",color:"green"}:e.message={text:"Error submitting. Check internet connection.",color:"red"}}).catch(function(t){e.message={text:"Error submitting. Check internet connection.",color:"red"}}),e.$apply}}]),t.service("Tutorials",function(){return[{title:"Test Tutorial One",description:"Test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description",icon:"key",steps:[{order:1,text:"First you have to do this",image:""},{order:2,text:"Then you have to do that",image:""},{order:3,text:"And there you have it folks. Power on and rock the house",image:""}]},{title:"Test Tutorial Two",description:"Test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description",icon:"lamp",steps:[{order:1,text:"First you have to do this",image:""},{order:2,text:"Then you have to do that",image:""},{order:3,text:"And there you have it folks. Power on and rock the house",image:""}]},{title:"Test Tutorial Three",description:"Test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description",icon:"tools",steps:[{order:1,text:"First you have to do this",image:""},{order:2,text:"Then you have to do that",image:""},{order:3,text:"And there you have it folks. Power on and rock the house",image:""}]},{title:"Test Tutorial Four",description:"Test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description test turial one description",icon:"cog",steps:[{order:1,text:"First you have to do this",image:""},{order:2,text:"Then you have to do that",image:""},{order:3,text:"And there you have it folks. Power on and rock the house",image:"cog"}]}]}),t.controller("WifiCtrl",["$scope","$state","Nonbox","Wifi",function(t,e,n,o){function r(){return document.getElementById("passwordDialog")}function i(){o.status().then(function(e){1==e.success?t.current=e:t.current={ssid:!1}}),o.scan().then(function(n){n.data&&1==n.data.success?t.networks=n.data.networks.filter(function(t){return"non"!==t.ssid}):n.data?t.error=n.data.msg:e.go("device")}).catch(function(t){e.go("device")})}t.connectSecure=!1,t.currentAp={},t.networks=[],t.error="",t.status="",t.colorStrength=function(t){return"rgba(253,188,64,"+(t>80?.01*t:.01*(t-15))+")"},t.connect=function(n){t.currentAp=n,n.security?r().showModal():(o.connect(n).then(function(e){t.connecting=!0}),e.reload())},t.secureConnect=function(e){o.connect(e).then(function(e){r().close(),t.connecting=!0,delete t.currentAp.password})},t.cancelConnect=function(t){r().close()},t.disconnect=function(){o.disconnect().then(function(t){i()})},t.reset=function(){o.reset().then(function(t){i()})},i()}]),t.service("Nonbox",["$rootScope","$http",function(t,e){return{check:function(){return e.get(t.nbServer).then(function(t){return 200===t.status&&"nonbox server"===t.data}).catch(function(t){return!1})},info:function(){return e.post(t.nbServer+"info").then(function(t){return t}).catch(function(t){return t})}}}]),t.service("Report",["$rootScope","$http",function(t,e){return{submit:function(n,o){return e.post(t.nbApi+"report/"+o,n).then(function(t){return t},function(t){return t}).catch(function(t){return t})}}}]),t.service("Wifi",["$rootScope","$http",function(t,e){return{scan:function(){return e.get(t.nbServer+"scan").then(function(t){return t}).catch(function(t){return t})},connect:function(n){return e.post(t.nbServer+"connect",{ap:n}).then(function(t){return t}).catch(function(t){return t})},status:function(){return e.get(t.nbServer+"status").then(function(e){return t.online=e.data.success,e.data}).catch(function(e){return t.online=!1,e})},disconnect:function(){return e.delete(t.nbServer+"disconnect").then(function(e){return t.online=!1,e}).catch(function(t){return t})},reset:function(){return e.delete(t.nbServer+"reset").then(function(e){return t.online=e.data.success,e.data}).catch(function(e){return t.online=!1,e})}}}])}();